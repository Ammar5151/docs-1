---
title: Setting up Hoppscotch
---

# Setting up Hoppscotch

## Configuring the environment

Before you get started with the installation, you need to configure the environment variables.

Copy the contents of `.env.example` file found in the root directory of cloned repository to `.env` and add your own values for the environment variables.

::alert{type="info"}
Ensure the values are not wrapped in any quotes.
::

```yaml
#-----------------------Backend Config------------------------------#
# Prisma Config
DATABASE_URL=postgresql://username:password@url:5432/dbname # or replace with your database URL

# Auth Tokens Config
JWT_SECRET=secretcode123
TOKEN_SALT_COMPLEXITY=10
MAGIC_LINK_TOKEN_VALIDITY=3
REFRESH_TOKEN_VALIDITY=604800000
ACCESS_TOKEN_VALIDITY=86400000"
SESSION_SECRET=anothersecretcode123

# Hoppscotch App Domain Config
REDIRECT_URL=http://localhost:3000
WHITELISTED_ORIGINS=http://localhost:3170,http://localhost:3000,http://localhost:3100
VITE_ALLOWED_AUTH_PROVIDERS=GOOGLE,GITHUB,MICROSOFT,EMAIL

# Google Auth Config
GOOGLE_CLIENT_ID=*****
GOOGLE_CLIENT_SECRET=*****
GOOGLE_CALLBACK_URL=http://localhost:3170/v1/auth/google/callback
GOOGLE_SCOPE=email,profile

# Github Auth Config
GITHUB_CLIENT_ID=*****
GITHUB_CLIENT_SECRET=****
GITHUB_CALLBACK_URL=http://localhost:3170/v1/auth/github/callback
GITHUB_SCOPE=user:email

# Microsoft Auth Config
MICROSOFT_CLIENT_ID=*****
MICROSOFT_CLIENT_SECRET=*****
MICROSOFT_CALLBACK_URL=http://localhost:3170/v1/auth/microsoft/callback
MICROSOFT_SCOPE=user.read
MICROSOFT_TENANT=common

# Mailer config
MAILER_SMTP_URL=smtps://user@domain.com:pass@smtp.domain.com
MAILER_ADDRESS_FROM=From Name Here" <from@example.com>

# Rate Limit Config
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100


#-----------------------Frontend Config------------------------------#


# Base URLs
VITE_BASE_URL=http://localhost:3000
VITE_SHORTCODE_BASE_URL=http://localhost:3000
VITE_ADMIN_URL=http://localhost:3100

# Backend URLs
VITE_BACKEND_GQL_URL=http://localhost:3170/graphql
VITE_BACKEND_WS_URL=wss://localhost:3170/graphql
VITE_BACKEND_API_URL=http://localhost:3170/v1

# Terms Of Service And Privacy Policy Links (Optional)
VITE_APP_TOS_LINK=https://docs.hoppscotch.io/terms
VITE_APP_PRIVACY_POLICY_LINK=https://docs.hoppscotch.io/privacy
```

Let's understand the major environment variables:

1. `DATABASE_URL`: This is where you add your Postgres database URL, you can also use our default database shipped within the docker container `postgresql://postgres:testpass@hoppscotch-db:5432/hoppscotch`
2. `TOKEN_SALT_COMPLEXITY`: Defines the complexity of the SALT that is used for hashing - higher number implies more complex the salt
3. `MAGIC_LINK_TOKEN_VALIDITY`:Duration of the validity of the magic link being sent to sign in to Hoppscotch (in days)
4. `REFRESH_TOKEN_VALIDITY`: Validity of the refresh token for auth (in ms)
5. `ACCESS_TOKEN_VALIDITY` : Validity of the access token for auth (in ms)
6. `JWT_SECRET`, `SESSION_SECRET`: Secret Keys for security purposes
7. `REDIRECT_URL`: Is a fallback URL to debug when the actual redirects fail
8. `WHITELISTED_ORIGINS`: URLs of Hoppscotch backend, admin dashboard and the frontend app
9. `VITE_ALLOWED_AUTH_PROVIDERS`: Allows you to specify which auth providers you want to enable
10. `MAILER_SMTP_URL`: The SMTP URL for email delivery
11. `MAILER_ADDRESS_FROM`: The email address that you would be using
12. `RATE_LIMIT_TTL`: The time it takes to refresh the maximum number of requests being received
13. `RATE_LIMIT_MAX`: The maximum number of requests that Hoppscotch can handle under `RATE_LIMIT_TTL`
14. `VITE_BASE_URL`: This is the URL where your deployment will be accesible from
15. `VITE_SHORTCODE_BASE_URL`: A URL to generate shortcodes for sharing, can be same as `VITE_BASE_URL`
16. `VITE_BACKEND_GQL_URL`: The URL for GraphQL within the instance
17. `VITE_BACKEND_WS_URL`: The URL for WebSockets within the instance
18. `VITE_BACKEND_API_URL`: The URL for REST APIs within the instance
19. `VITE_APP_TOS_LINK` and `VITE_APP_PRIVACY_POLICY_LINK` are optional and is used to configure the links to the Terms & Conditions and Privacy Policy

Third party auth configs have to be obtained from the respective providers. Hoppscotch requires all three auth providers to be configured so that you can start using it. [Read more](/documentation/self-host/community-edition/prerequisites#oauth).

## Docker

Once the environment variables are configured, you may proceed to the next step of setting up the Hoppscotch instance. Currently, there are two ways to set up Hoppscotch:

- Using the AIO container
- Using individual containers for the services

The recommended approach is to spin up all the services, as the **AIO container is still in beta** and may change moving forward.

::alert{type="info"}
Before proceeding further, ensure that you have a running instance of Postgres.
::

### Using the AIO container
<!-- ToDo: add links to DockerHub -->
The [All-In-One (AIO)](http://localhost:3000/documentation/self-host/community-edition/setting-up-hoppscotch) is a single container that initialises all the services required for Hoppscotch to run (Hoppscotch app, Admin app, and the backend).

::alert{type="info"}
The AIO container is still in beta, so things may change in the future.
::

Pull the container from DockerHub with the following command:

```jsx
docker pull aio-hoppscotch
```

After pulling the container, start Hoppscotch via the following command:

```jsx
docker run -p 3000:3000 -p 3100:3100 -p 3170:3170 --env-file .env aio-hoppscotch
# 3000 for Hoppscotch app
# 3100 for Admin app
# 3170 for Backend
```

Open the browser to [http://localhost:3100](http://localhost:3100/) to [setup and access](/documentation/self-host/community-edition/access-and-setup) the admin app.

### Using individual containers for the services

To self-host Hoppscotch, you will need the following services running via Docker:
<!-- ToDo: add links to DockerHub -->
- Backend 
- Frontend 
- Admin app 

Pull the containers from DockerHub with the following command:

```jsx
docker pull backend
docker pull frontend
docker pull admin-app

```

After pulling the container, start Hoppscotch by running all the three services:

```jsx
docker run -p 3000:3000 --env-file .env frontend
docker run -p 3100:3100 --env-file .env admin-app
docker run -p 3170:3170 --env-file .env backend

```

Open the browser to [http://localhost:3100](http://localhost:3100/) to [setup and access](/documentation/self-host/community-edition/access-and-setup) the admin app.

## Running migrations

Once the instance of Hoppscotch is up, you need to run migrations on the database to ensure that it has the relevant tables. Depending on how Hoppscotch was set up, the method to run the migrations changes.

### Using the AIO container

Run the following command to copy the ID of the AIO container:

```jsx
docker ps

```

### Using individual containers for the services

Run the following command to copy the ID of the backend container:

```jsx
docker ps

```

Once the respective container ID is copied, execute the following command to open an interactive shell within the AIO container to execute the migration command:

```jsx
docker exec -it <container_id> /bin/sh

```

Once inside the container, run the migration using:

```jsx
pnpx prisma migrate deploy

```

## Clickhouse setup

In order to start saving the [audit logs](/guides/articles/audit-logs) into ClickHouse, we need to first create the relevant databases with the relevant tables in it. Follow the following instructions to set up ClickHouse to start saving logs:

1. Ensure that all the relevant containers are running.
2. Run the following command to get the ID of the ClickHouse container:

   ```jsx
   docker ps
   ```

3. Once the ClickHouse container is also running, open an interactive bash into it using the `clickhouse-client`:

   ```jsx
   docker exec -it <clickhouse_container_id> clickhouse-client

   ```

4. Once inside the container, execute the following SQL commands:

   ```jsx
   # Create a database called logs
   CREATE DATABASE logs

   # Create a table called audit_logs in the logs database
   CREATE TABLE IF NOT EXISTS logs.audit_logs
   (
       `event` String,
       `timestamp` DateTime,
       `user` Tuple(id String, email String, name String),
       `group` Tuple(type LowCardinality(String), id String),
       `resource` Tuple(type LowCardinality(String), metadata String),
       `statusCode` Int16,
       `errorMessage` String,
       `result` LowCardinality(String),
       `server_version` String
   )
   ENGINE = MergeTree
   ORDER BY timestamp

   ```
